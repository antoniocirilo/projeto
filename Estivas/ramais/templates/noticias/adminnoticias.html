{% extends "base.html" %}
{% load static %}
{% load widget_tweaks %}

{% block titulo %}
<title>Noticias - admin</title>
{% endblock %}

{% block conteudo %}
<div class="container">
	<h4 class="text-end"><a href="{% url 'cadastronoticia' %}"><button type="button" class="btn botao btn-outline-primary btn-lg ">CADASTRAR NOTÍCIA</button></a></h4>
	<div class="row">
		<div class="col-12">
			<h3>Todas as notícias</h3>
		</div>
	</div>
	{% for noticia in noticias %}
	<div class="row">
		<div class="col-md-3 col-4 imagem">
			<a href="{% url 'noticiaespecifica' noticia.id %}" class="noticia-link">
			<img class="img-fluid img-thumbnail" src="/media/{{noticia.imagem}}">
		</a>
		</div>
		<div class="col-md-7 col-8 noticia">
			<a href="{% url 'noticiaespecifica' noticia.id %}" class="noticia-link">
			<h4>{{noticia.titulo}}</h4>
			<br>
			<h5>{{noticia.subtitulo}}</h5>
			</a>
		</div>
		<div class="col-md-2 col-12">
			<a href="{% url 'atualizarnoticia' noticia.id %}"><button type="button" class="btn botao btn-outline-success">EDITAR</button></a> <br> <br>

			<button type="button" class="btn botao btn-outline-danger" data-bs-toggle="modal" data-bs-target="#apagar-{{noticia.id}}">
				APAGAR
			</button>

			<!-- Modal -->
			<div class="modal fade" id="apagar-{{noticia.id}}" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
				<div class="modal-dialog">
					<div class="modal-content">
						<div class="modal-header">
							<h5 class="modal-title" id="exampleModalLabel">APAGAR</h5>
							<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
						</div>
						<div class="modal-body">
							Tem certeza que deseja apagar a notícia <b>{{noticia.titulo}} ({{noticia.subtitulo}})</b> para sempre?
						</div>
						<div class="modal-footer">
							<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">NÃO</button>
							<a href="{% url 'deletarnoticia' noticia.id %}"><button type="button" class="btn btn-primary">SIM</button></a>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<br>
	{% endfor %}
</div>

<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.1/dist/umd/popper.min.js" integrity="sha384-SR1sx49pcuLnqZUnnPwx6FCym0wLsk5JZuNx2bPPENzswTNFaQU1RDvt3wT4gWFG" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.min.js" integrity="sha384-j0CNLUeiqtyaRmlzUHCPZ+Gy5fQu0dQ6eZ/xAww941Ai1SxSY+0EQqNXNE6DZiVc" crossorigin="anonymous"></script>
{% endblock %}